group_by(LST) %>%
summarise(count=n()) %>%
ungroup()
sort(unique(mh2015_puf$LST))
states=sort(unique(mh2015_puf$LST))
states
df1c=mh2015_puf %>%
filter(FACILITYTYPE == 6
,! LST %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(LST) %>%
summarise(count=n())
unique(df1c$LST)
table(df1c$LST)
mh2015_puf$FACILITYTYPE
table(mh2015_puf$FACILITYTYPE)
unique(mh2015_puf$FACILITYTYPE)
df1c=mh2015_puf %>%
filter(FACILITYTYPE == '[10] Veterans Administration medical center (VAMC) or other VA health care facility'
,! LST %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(LST) %>%
summarise(count=n())
unique(mh2015_puf$FACILITYTYPE)
unique(mh2015_puf$FACILITYTYPE)[1]
unique(mh2015_puf$FACILITYTYPE)[10]
df1c=mh2015_puf %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! LST %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(LST) %>%
summarise(count=n())
df1c
df1c$LST
df1c$LST=='AK'
class(df1c$LST)
df1c$LST
df1c$LST=='AK'
df1c$LST=='AL'
any(df1c$LST=='AL')
any(df1c$LST==1)
table(df1c$LST)
df1c
#some cleaning
df = mh2015_puf %>%
mutate(STATE = trim(as.character(LST)))
#some cleaning
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST).'both'))
#some cleaning
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
df1c=mh2015_puf %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(LST) %>%
summarise(count=n())
df1c=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(LST) %>%
summarise(count=n())
df1c
df1c=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
ggplot(data=df1c,aes(x=STATE,fill=STATE,y=count)) +
geom_col() +
coord_flip()
ggplot(data=df1c,aes(x=STATE,fill=STATE,y=count)) +
geom_col(legend=F) +
coord_flip()
ggplot(data=df1c,aes(x=STATE,fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F)
ggplot(data=df1c,aes(x=STATE,fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=desc(STATE),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,STATE,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_inorder(STATE),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_ord(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
title('Veterns Administration Veteran Centers by State')
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
geom_tile('Veterns Administration Veteran Centers by State') +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
geom_title('Veterns Administration Veteran Centers by State') +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_tufte()
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(title=element_text(hjust=0))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(title=element_text(hjust=1))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(title=element_text(hjust=-1))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=1))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=0))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=-1))
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
stateSize = read.csv('statesize.csv')
stateSize
stateSize$Abbrev
df = df %>%
left_join(stateSize, by=c('STATE'='Abbrev'))
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(scales)
library(DT)
library(tidyverse)
library(ggthemes)
load('N-MHSS-2015-DS0001-data/N-MHSS-2015-DS0001-data-r.rda')
dim(mh2015_puf)
#some cleaning
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
df1c=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
ggplot(data=df1c,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
df = df %>%
left_join(stateSize, by=c('STATE'='Abbrev'))
df$SqMiles
unique(df$LST)
#state col has been fixed on point 1a
write(unique(df$LST))
#state col has been fixed on point 1a
write(unique(df$LST)[1])
#state col has been fixed on point 1a
message('|',unique(df$LST)[1],'|')
#LST col has been fixed on point 1a
#LST has spaces afte the State, on 1a I user trimws to remove them and mapped the new value to STATE column
message('|',unique(df$LST)[1:5],'|')
#LST col has been fixed on point 1a
#LST has spaces afte the State, on 1a I user trimws to remove them and mapped the new value to STATE column
message(paste0('|',unique(df$LST)[1:5],'|'))
#LST col has been fixed on point 1a
#LST has spaces afte the State, on 1a I user trimws to remove them and mapped the new value to STATE column
message(paste0(unique(df$LST)[1:5],collapse='|'))
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both')) %>% #Fixing LST field, removing white spaces and remapping as STATE
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
df1c
#I already corrected the LST  on 1a, mapped now as STATE :)
df2b = df1c %>%
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
df2b
summary(df2b)
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(scales)
library(DT)
library(tidyverse)
library(ggthemes)
load('N-MHSS-2015-DS0001-data/N-MHSS-2015-DS0001-data-r.rda')
dim(mh2015_puf)
#Fixing LST field, removing white spaces and remapping as STATE
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
dfSummary=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(scales)
library(DT)
library(tidyverse)
library(ggthemes)
load('N-MHSS-2015-DS0001-data/N-MHSS-2015-DS0001-data-r.rda')
dim(mh2015_puf)
#Fixing LST field, removing white spaces and remapping as STATE
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
dfSummary=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(scales)
library(DT)
library(tidyverse)
library(ggthemes)
load('N-MHSS-2015-DS0001-data/N-MHSS-2015-DS0001-data-r.rda')
dim(mh2015_puf)
#Fixing LST field, removing white spaces and remapping as STATE
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
dfSummary=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
stateSize = read.csv('statesize.csv')
#LST col has been fixed on point 1a
#LST has spaces afte the State, on 1a I user trimws to remove them and mapped the new value to STATE column
message(paste0(unique(df$LST)[1:5],collapse='|'))
#I already corrected the LST  on 1a, mapped now as STATE :)
dfSummary = dfSummary %>%
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
summary(dfSummary)
dfSummary =  dfSummary %>%
mutate(HospSqM = SqMiles / count)
dfSummary
dfSummary =  dfSummary %>%
mutate(HospSqM = SqMiles / count / 1000)
#I already corrected the LST  on 1a, mapped now as STATE :)
dfSummary = dfSummary %>%
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
summary(dfSummary)
dfSummary
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(scales)
library(DT)
library(tidyverse)
library(ggthemes)
load('N-MHSS-2015-DS0001-data/N-MHSS-2015-DS0001-data-r.rda')
dim(mh2015_puf)
#Fixing LST field, removing white spaces and remapping as STATE
df = mh2015_puf %>%
mutate(STATE = trimws(as.character(LST),'both'))
sort(unique(df$STATE))
dfSummary=df %>%
filter(FACILITYTYPE == 'Veterans Administration medical center (VAMC) or other VA health care facility'
,! STATE %in% c('AK','AS','GU','HI','PR','VI')
) %>%
group_by(STATE) %>%
summarise(count=n())
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,count,desc=T),fill=STATE,y=count)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
stateSize = read.csv('statesize.csv')
#LST col has been fixed on point 1a
#LST has spaces afte the State, on 1a I user trimws to remove them and mapped the new value to STATE column
message(paste0(unique(df$LST)[1:5],collapse='|'))
dfSummary %>%
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
#I already corrected the LST  on 1a, mapped now as STATE :)
dfSummary = dfSummary %>%
left_join(stateSize, by=c('STATE'='Abbrev')) #merging with stateSize
summary(dfSummary)
dfSummary %>%
mutate(HospSqM = SqMiles / count / 1000)
dfSummary =  dfSummary %>%
mutate(HospSqMK = SqMiles / count / 1000)
summary(dfSummary)
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=STATE,y=HospSqMK)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Count of Centers') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
dfSummary
View(stateSize)
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=STATE,y=HospSqMK)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=dfSummary,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=STATE,y=HospSqMK)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=STATE,y=HospSqMK)) +
geom_col() +
scale_fill_discrete(guid=F) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_discrete(guid=T) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_discrete() +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_brewer(palette=2) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_brewer(palette='Paired') +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_brewer(palette='Paired',n=4) +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_brewer(palette='Paired') +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
ggplot(data=filter(dfSummary,! is.na(HospSqMK)) #removing states with no SqM (DC)
,aes(x=forcats::fct_reorder(STATE,HospSqMK,desc=T),fill=Region,y=HospSqMK)) +
geom_col() +
scale_fill_brewer(palette='Set1') +
ylab('Hospitals per Thousand Square Miles') +
xlab('State') +
ggtitle('Veterns Administration Veteran Centers by State') +
coord_flip() +
ggthemes::theme_gdocs() +
theme(plot.title=element_text(hjust=.5))
